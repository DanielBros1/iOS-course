////  PaymentViewModel.swift//  stripe////  Created by user279425 on 1/14/26.//import Foundationinternal import Combine@MainActorfinal class PaymentViewModel: ObservableObject {    @Published var paymentStatus: PaymentStatus?    @Published var purchasedItems: [PurchasedItem] = []    private let paymentService: PaymentService    let product: Product    init(        product: Product,        paymentService: PaymentService = MockPaymentService()    ) {        self.product = product        self.paymentService = paymentService    }    func pay() async {        do {            let clientSecret = try await paymentService                .createPaymentIntent(amount: product.price)            let status = try await paymentService                .confirmPayment(clientSecret: clientSecret)            paymentStatus = status            if status == .paid {                savePurchase()            }        } catch {            paymentStatus = .failed        }    }    private func savePurchase() {        let payment = Payment(            id: UUID(),            productId: product.id,            amount: product.price,            status: .paid,            createdAt: Date()        )        let item = PurchasedItem(            id: UUID(),            product: product,            payment: payment        )        purchasedItems.append(item)    }}